class widgetKenburnsSlideshow extends elementorModules.frontend.handlers.Base{getDefaultSettings(){return{selectors:{targetInstance:".eac-kenburns__images-wrapper"}}}getDefaultElements(){const e=this.getSettings("selectors"),t={$targetInstance:this.$element.find(e.targetInstance),targetID:this.$element.find(e.targetInstance).data("elem-id"),parentID:this.$element.data("id"),settings:{randomize:!1,slideDuration:this.$element.find(e.targetInstance).data("duration"),fadeDuration:1e3,pauseOnTabBlur:!elementorFrontend.isEditMode(),slideElementClass:"slide",slideShowWrapperId:"slideshow"},isEditMode:!!elementorFrontend.isEditMode(),currentSlideStartTime:Date.now(),paused:!1,slideTimeDelta:0,resumeStartTime:0,resumeTimer:null,cssAnimationDuration:0,$slidesShowWrapper:null,parentIDedit:null,$parentWrapper:null,$slidesWrapper:null};return t.parentIDedit=t.isEditMode?"edit_"+t.parentID:t.parentID,t.$parentWrapper=jQuery(".elementor-element-"+t.parentID),t.$slidesWrapper=this.$element.find(".eac-kenburns__images-wrapper."+t.targetID)||{},t}onInit(){if(super.onInit(),0===this.elements.$slidesWrapper.length&&window[this.elements.parentIDedit])return window.clearInterval(window[this.elements.parentIDedit]),delete window[this.elements.parentIDedit],!1;if(this.elements.$slidesWrapper.length>0&&this.elements.parentID===this.elements.targetID){if(!0===this.elements.settings.randomize){const e=this.elements.$slidesWrapper[0];for(let t=e.children.length;t>=0;t--)e.appendChild(e.children[Math.random()*t|0])}0===this.elements.$parentWrapper.find("div#"+this.elements.settings.slideShowWrapperId).length&&jQuery('<div id="'+this.elements.settings.slideShowWrapperId+'"></div>').insertBefore(this.elements.$slidesWrapper),this.elements.$slidesShowWrapper=this.elements.$parentWrapper.find("#"+this.elements.settings.slideShowWrapperId),this.elements.cssAnimationDuration=this.elements.settings.slideDuration+this.elements.settings.fadeDuration,this.elements.$slidesWrapper.find("."+this.elements.settings.slideElementClass+":first span.animate").addClass("active").css("animation-duration",this.elements.cssAnimationDuration+"ms"),this.elements.$slidesWrapper.find("."+this.elements.settings.slideElementClass+":first").prependTo(this.elements.$slidesShowWrapper),window[this.elements.parentIDedit]&&(window.clearInterval(window[this.elements.parentIDedit]),delete window[this.elements.parentIDedit]),window[this.elements.parentIDedit]=this.elements.parentIDedit,window[this.elements.parentIDedit]=window.setInterval(this.slideRefresh.bind(this),this.elements.settings.slideDuration)}}bindEvents(){!0===this.elements.settings.pauseOnTabBlur&&(jQuery(window).focus(this.setTargetEventFocus.bind(this)),jQuery(window).blur(this.setTargetEventBlur.bind(this)))}setTargetEventFocus(){if(this.elements.$slidesShowWrapper&&1===this.elements.$slidesShowWrapper.length&&!0===this.elements.paused){const e=this;this.elements.resumeStartTime=Date.now(),this.elements.paused=!1;this.elements.$parentWrapper.find("#"+this.elements.settings.slideShowWrapperId+" span.active:last").removeClass("paused"),this.elements.resumeTimer=setTimeout((()=>{e.elements.slideTimeDelta=0,e.slideRefresh.bind(e),window[e.elements.parentIDedit]=e.elements.parentIDedit,window[e.elements.parentIDedit]=window.setInterval(e.slideRefresh.bind(e),e.elements.settings.slideDuration)}),this.elements.settings.slideDuration-this.elements.slideTimeDelta)}}setTargetEventBlur(){if(this.elements.paused=!0,0!==this.elements.slideTimeDelta){const e=Date.now()-this.elements.resumeStartTime;this.elements.slideTimeDelta=this.elements.slideTimeDelta+e}else this.elements.slideTimeDelta=Date.now()-this.elements.currentSlideStartTime;this.elements.$parentWrapper.find("#"+this.elements.settings.slideShowWrapperId+" span.active:first").addClass("paused"),window.clearInterval(window[this.elements.parentIDedit]),window.clearTimeout(this.elements.resumeTimer)}slideRefresh(){const e=this,t=this.elements.$slidesShowWrapper[0],s=this.elements.$slidesWrapper.find("."+this.elements.settings.slideElementClass+":first");if(0===t.children.length)1===s.length?s.prependTo(this.elements.$slidesShowWrapper):(window.clearInterval(window[this.elements.parentIDedit]),window.clearTimeout(this.elements.resumeTimer));else{this.elements.$slidesWrapper.find("."+this.elements.settings.slideElementClass+":first").prependTo(this.elements.$slidesShowWrapper);const t=this.elements.$parentWrapper.find("#"+this.elements.settings.slideShowWrapperId+" ."+this.elements.settings.slideElementClass+":first span.animate"),s=this.elements.$parentWrapper.find("#"+this.elements.settings.slideShowWrapperId+" ."+this.elements.settings.slideElementClass+":last"),n=this.elements.$parentWrapper.find("#"+this.elements.settings.slideShowWrapperId+" ."+this.elements.settings.slideElementClass+":last span.animate");t.addClass("active").css("animation-duration",this.elements.cssAnimationDuration+"ms"),s.fadeOut(this.elements.settings.fadeDuration,(()=>{n.removeClass("active").css("animation-duration","0ms"),s.appendTo(e.elements.$slidesWrapper),e.elements.$slidesWrapper.find("."+e.elements.settings.slideElementClass).show(0)}))}}}jQuery(window).on("elementor/frontend/init",(()=>{const e=e=>{elementorFrontend.elementsHandler.addHandler(widgetKenburnsSlideshow,{$element:e})};elementorFrontend.hooks.addAction("frontend/element_ready/section",e),elementorFrontend.hooks.addAction("frontend/element_ready/container",e),elementorFrontend.hooks.addAction("frontend/element_ready/column",e)}));