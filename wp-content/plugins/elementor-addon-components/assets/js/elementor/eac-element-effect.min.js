class elementMotion extends elementorModules.frontend.handlers.Base{getDefaultElements(){return{$target:this.$element,elType:this.$element.data("element_type"),targetClassId:".elementor-element-"+this.$element.data("id"),parentId:null,isEditMode:Boolean(elementorFrontend.isEditMode()),currentDevice:elementorFrontend.getCurrentDeviceMode(),settings:this.$element.data("eac_settings-motion")||{},motionSettings:"data-eac_settings-motion",animationClass:"eac-element_motion-class",animationBase:"animate__animated",animationType:"animate__",entranceSwitcher:"eac_element_motion_effect",entranceId:"eac_element_motion_id",entranceType:"eac_element_motion_type",entranceDuration:"eac_element_motion_duration",entranceTop:"eac_element_motion_trigger",entranceBottom:"eac_element_motion_trigger",entranceDevices:"eac_element_motion_devices",optionsObserve:{rootMargin:"",threshold:1},motionOverflow:["rubberBand","wobble","heartBeat"]}}onInit(){if(super.onInit(),this.elements.isEditMode&&this.buildDataSettingsInEditor(),!this.elements.$target.hasClass(this.elements.animationClass))return;if(0===Object.keys(this.elements.settings).length)return void this.cleanElements();if(-1===jQuery.inArray(this.elements.currentDevice,this.elements.settings.devices))return void this.cleanElements();!0===window.matchMedia("(prefers-reduced-motion: reduce)")||!0===window.matchMedia("(prefers-reduced-motion: reduce)").matches?this.cleanElements():((-1!==this.elements.settings.type.indexOf("Right")||-1!==this.elements.settings.type.indexOf("Left")||jQuery.inArray(this.elements.settings.type,this.elements.motionOverflow))&&!1!==(this.elements.parentId=this.findParentTagId(this.elements.targetClassId))&&jQuery('[data-id="'+this.elements.parentId+'"]').css("overflow","hidden"),this.elements.animationType=this.elements.animationType+this.elements.settings.type,this.elements.optionsObserve.rootMargin="-"+this.elements.settings.top+"% 0% -"+this.elements.settings.bottom+"% 0%")}bindEvents(){if(window.IntersectionObserver){new IntersectionObserver(this.observeElementInViewport.bind(this),this.elements.optionsObserve).observe(this.elements.$target[0])}this.elements.$target.on("animationend",(()=>{this.cleanElements()}))}buildDataSettingsInEditor(){const e=this.getElementSettingInEditor(this.elements.entranceSwitcher,this.elements.$target)||"no",t=this.getElementSettingInEditor(this.elements.entranceType,this.elements.$target)||"";if("no"===e||""===t)return void this.cleanElements();const n={type:t,duration:this.getElementSettingInEditor(this.elements.entranceDuration,this.elements.$target)+"s"||"2s",top:this.getElementSettingInEditor(this.elements.entranceTop,this.elements.$target).sizes.start||10,bottom:100-this.getElementSettingInEditor(this.elements.entranceBottom,this.elements.$target).sizes.end||10,devices:this.getElementSettingInEditor(this.elements.entranceDevices,this.elements.$target)||["desktop","tablet"]};this.elements.$target.attr(this.elements.motionSettings,JSON.stringify(n)),this.elements.settings=JSON.parse(this.elements.$target.attr(this.elements.motionSettings)),this.elements.$target.addClass(this.elements.animationClass),this.elements.$target.css("visibility","hidden")}getElementSettingInEditor(e,t){let n={};if(!elementorFrontend.hasOwnProperty("config"))return;if(!elementorFrontend.config.hasOwnProperty("elements"))return;if(!elementorFrontend.config.elements.hasOwnProperty("data"))return;const s=this.elements.$target.data("model-cid"),i=elementorFrontend.config.elements.data[s];return i&&i.hasOwnProperty("attributes")&&(n=i.attributes||{},n[e])?n[e]:void 0}cleanElements(){this.elements.settings={},this.elements.$target.removeClass(this.elements.animationClass),this.elements.$target.removeClass(this.elements.animationBase),this.elements.$target.removeClass(this.elements.animationType),this.elements.$target.removeAttr(this.elements.motionSettings),this.elements.$target.css({"--animate-duration":"",visibility:""}),null!==this.elements.parentId&&jQuery('[data-id="'+this.elements.parentId+'"]').css("overflow",""),this.elements.$target.off("animationend")}observeElementInViewport(e,t){if(e[0].isIntersecting){const n=e[0].target;n.style.visibility="visible",n.style.setProperty("--animate-duration",this.elements.settings.duration),n.classList.add(this.elements.animationBase,this.elements.animationType),t.unobserve(n)}}findParentTagId(e){let t=document.querySelector(e),n=t.tagName.toLowerCase();for(;"body"!==n;){t=t.parentElement;const e=t.tagName.toLowerCase();if("section"===e||"div"===e&&t.hasAttribute("data-element_type")&&"container"===t.getAttribute("data-element_type"))return t.dataset.id;n=t.parentElement.tagName.toLowerCase()}return!1}}jQuery(window).on("elementor/frontend/init",(()=>{elementorFrontend.hooks.addAction("frontend/element_ready/widget",(e=>{elementorFrontend.elementsHandler.addHandler(elementMotion,{$element:e})}))}));