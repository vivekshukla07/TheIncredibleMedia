class widgetOffCanvas extends elementorModules.frontend.handlers.Base{getDefaultSettings(){return{selectors:{targetInstance:".eac-off-canvas",targetWrapper:".oc-offcanvas__wrapper",targetVisibleWrapper:".oc-offcanvas__wrapper-canvas",targetOverlay:".oc-offcanvas__wrapper-overlay",targetHeader:".oc-offcanvas__canvas-header",targetCloseId:".oc-offcanvas__canvas-close",targetContent:".oc-offcanvas__canvas-content",targetFirstElement:".oc-first-element",targetLastElement:".oc-last-element"}}}getDefaultElements(){const e=this.getSettings("selectors");let t={$targetInstance:this.$element.find(e.targetInstance),$targetWrapper:this.$element.find(e.targetWrapper),$targetVisibleWrapper:this.$element.find(e.targetVisibleWrapper),$targetOverlay:this.$element.find(e.targetOverlay),$targetHeader:this.$element.find(e.targetHeader),$targetCloseId:this.$element.find(e.targetCloseId),$targetContent:this.$element.find(e.targetContent),$targetFirstElement:this.$element.find(e.targetVisibleWrapper).find(e.targetFirstElement),$targetLastElement:this.$element.find(e.targetVisibleWrapper).find(e.targetLastElement),settings:this.$element.find(e.targetWrapper).data("settings")};return t.$triggerId=jQuery("#"+t.settings.data_id+" .oc-offcanvas__wrapper-trigger"),t.$triggerLink="BUTTON"===t.$triggerId.prop("nodeName")?t.$triggerId:t.$triggerId.children(":first-child"),t.$targetId=jQuery("#"+t.settings.data_canvas_id+".oc-offcanvas__wrapper-canvas"),t}onInit(){super.onInit(),"left"===this.elements.settings.data_position&&this.elements.$targetHeader.css({"flex-direction":"row-reverse"})}bindEvents(){this.elements.$triggerId.on("click",this.onButtonTriggerClick.bind(this)),this.elements.$targetCloseId.add(this.elements.$targetOverlay).on("click",this.onCloseButtonOverlayClick.bind(this)),this.elements.$targetCloseId.on("keydown",this.onCloseButtonWithKeyboard.bind(this)),jQuery(document.body).on("keydown",this.onCloseBodyWithEscape.bind(this)),this.elements.$targetVisibleWrapper.on("keydown",this.onNavigateWithKeyboard.bind(this))}onButtonTriggerClick(e){e.preventDefault(),this.elements.$triggerLink.attr("aria-expanded","true"),jQuery("body").css("overflow-y","hidden"),"block"===this.elements.$targetContent.css("display")&&this.elements.$targetContent.css({display:"none"}),"top"===this.elements.settings.data_position||"bottom"===this.elements.settings.data_position?this.elements.$targetId.animate({height:"toggle"},300,(()=>{this.elements.$targetContent.css({display:"block"}),this.elements.$targetOverlay.css({display:"block"})})):this.elements.$targetId.animate({width:"toggle"},300,(()=>{this.elements.$targetContent.css({display:"block"}),this.elements.$targetOverlay.css({display:"block"})}))}onCloseButtonOverlayClick(e){e.preventDefault(),this.elements.$triggerLink.attr("aria-expanded","false"),jQuery("body").css("overflow-y",""),this.elements.$targetContent.css({display:"none"}),this.elements.$targetOverlay.css({display:"none"}),"top"===this.elements.settings.data_position||"bottom"===this.elements.settings.data_position?this.elements.$targetId.animate({height:"toggle"},300):this.elements.$targetId.animate({width:"toggle"},300)}onCloseButtonWithKeyboard(e){const t=e.code||e.key||0;"Enter"!==t&&"Space"!==t||"block"!==this.elements.$targetId.css("display")||(e.preventDefault(),this.elements.$triggerLink.attr("aria-expanded","false"),jQuery("body").css("overflow-y",""),this.elements.$targetContent.css({display:"none"}),this.elements.$targetOverlay.css({display:"none"}),"top"===this.elements.settings.data_position||"bottom"===this.elements.settings.data_position?this.elements.$targetId.animate({height:"toggle"},300):this.elements.$targetId.animate({width:"toggle"},300),this.elements.$triggerLink.trigger("focus"))}onCloseBodyWithEscape(e){const t=e.code||e.key||0;if("Escape"===t&&"block"===this.elements.$targetId.css("display"))this.elements.$triggerLink.attr("aria-expanded","false"),jQuery("body").css("overflow-y",""),this.elements.$targetContent.css({display:"none"}),this.elements.$targetOverlay.css({display:"none"}),"top"===this.elements.settings.data_position||"bottom"===this.elements.settings.data_position?this.elements.$targetId.animate({height:"toggle"},300):this.elements.$targetId.animate({width:"toggle"},300),this.elements.$triggerLink.trigger("focus");else if(("Enter"===t||"Space"===t)&&"block"===this.elements.$targetId.css("display"))return!1}onNavigateWithKeyboard(e){const t=e.code||e.key||0,s=document.activeElement;("Tab"===t&&!e.shiftKey&&"block"===this.elements.$targetId.css("display")&&jQuery(s).hasClass("oc-last-element")||"Tab"===t&&e.shiftKey&&"block"===this.elements.$targetId.css("display")&&jQuery(s).hasClass("oc-first-element"))&&(e.preventDefault(),this.elements.$targetFirstElement.trigger("focus"))}}jQuery(window).on("elementor/frontend/init",(()=>{elementorFrontend.elementsHandler.attachHandler("eac-addon-off-canvas",widgetOffCanvas)}));