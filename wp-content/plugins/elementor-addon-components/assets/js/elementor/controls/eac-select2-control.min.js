jQuery(window).on("elementor/init",(function(){"use strict";var e=elementor.modules.controls.Select2.extend({onReady:function(){this.model_cid="elementor-control-default-"+this.model.cid,this.$control_select=this.$el.find(".eac-select2"),this.$control_wrapper=this.$el.find(".eac-select2_control-field"),this.multiple=this.model.get("multiple"),this.placeholder=this.model.get("placeholder"),this.object_type=this.model.get("object_type"),this.query_type=this.model.get("query_type"),this.query_taxo=this.model.get("query_taxo"),this.select2Options=this.model.get("select2Options"),this.select2Options&&0!==this.select2Options.length?this.loadSelect2Options():this.waitForAutocomplete(),this.multiple&&(this.addbuttonPlus(),this.$control_select.on("select2:select select2:unselect",(()=>this.addbuttonPlus())))},addbuttonPlus:function(){const e=this.$control_wrapper.find(".select2-selection__rendered .select2-search.select2-search--inline");setTimeout((()=>{jQuery('<li class="select2-selection__choice select2-selection__e-plus-button">+</li>').insertBefore(e)}),50)},loadSelect2Options:function(){var e=this.getControlValue(),t=[];jQuery.each(this.select2Options,(function(e,l){t.push({id:e,text:l})})),this.$control_select.select2({data:t,placeholder:this.multiple?"":this.placeholder,dir:elementorCommon.config.isRTL?"rtl":"ltr",delay:500,multiple:this.multiple}),e&&this.$control_select.select2().val(e).trigger("change")},waitForAutocomplete:function(){var e=this;this.$control_select.select2({allowClear:!0,placeholder:this.multiple?"":this.placeholder,dir:elementorCommon.config.isRTL?"rtl":"ltr",delay:500,multiple:this.multiple,ajax:{type:"POST",dataType:"json",cache:!1,quietMillis:500,url:eac_autocomplete_search.ajax_url,data:function(t){return{search:t.term||"",object_type:e.object_type,query_type:e.query_type,query_taxo:e.query_taxo,action:eac_autocomplete_search.ajax_action,nonce:eac_autocomplete_search.ajax_nonce}},processResults:function(e){return{results:JSON.parse(e.data)}}},initSelection:function(t,l){var o=e.getControlValue();l({id:"",text:""}),o&&jQuery.ajax({type:"POST",dataType:"json",cache:!1,quietMillis:500,url:eac_autocomplete_search.ajax_url,data:{search:o,object_type:e.object_type,query_type:e.query_type,query_taxo:e.query_taxo,action:eac_autocomplete_search.ajax_action_reload,nonce:eac_autocomplete_search.ajax_nonce}}).done((function(e){if(e.success){var l=JSON.parse(e.data),o="";jQuery.each(l,(function(e,l){var c=l.id,s=l.text;0===t.find("option[value='"+c+"']").length&&(o+='<option selected="selected" value="'+c+'">'+s+"</option>")})),""!==o&&t.append(o).trigger("change")}}))}})},onBeforeDestroy(){this.$control_select.select2("destroy").off("select2:select select2:unselect")}});elementor.addControlView("eac-select2",e)}));