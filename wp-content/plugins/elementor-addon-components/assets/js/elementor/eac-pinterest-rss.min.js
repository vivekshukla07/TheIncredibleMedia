import EacReadTheFeed from"../modules/eac-ajax-read-feed.js";!function(e,i){"use strict";var a={init:function(){i.hooks.addAction("frontend/element_ready/eac-addon-pinterest-rss.default",a.widgetPinterestRss)},widgetPinterestRss:function(i){var a=i.find(".eac-pin-galerie"),t=i.find(".select__options-items"),n=i.find("#pin__read-button"),r=i.find(".pin-item-header"),d=i.find("#pin__loader-wheel"),o=i.find("#pin_nonce").val(),s=i.find(".pin-galerie"),l=s.data("settings")||{},p=null;0!==Object.keys(l).length&&l.data_nombre&&l.data_longueur&&(t.find("option:first").attr("selected","selected"),t.on("change",(function(i){i.preventDefault(),e(".pin-galerie__item",s).remove(),r.html("")})),n.on("click touch",(function(i){i.preventDefault(),e(".pin-galerie__item",s).remove(),r.html(""),p=new EacReadTheFeed(e(".select__options-items option:selected",a).val().replace(/\s+/g,""),o,l.data_id),d.show()})),e(document).on("ajaxComplete",(function(i,a,t){if(null!=p&&t.ajaxOptions&&t.ajaxOptions===p.getOptions()){i.stopImmediatePropagation(),d.hide();var n=p.getItems();if(n.headError)return r.html('<span style="text-align:center; word-break:break-word;"><p>'+n.headError+"</p></span>"),!1;if(!n.rss)return r.html('<span style="text-align: center">Nothing to display</span>'),!1;var o=n.rss,c=n.profile;c.headLogo&&r.html('<img class="eac-image-loaded" src="'+c.headLogo+'">'),r.append('<span><a href="'+c.headLink+'"><h2>'+c.headTitle+"</h2></a></span>"),r.append("<span>"+c.headDescription+"</span>"),e.each(o,(function(i,a){if(i>=l.data_nombre)return!1;var t=e("<div/>",{class:"pin-galerie__item "+l.data_style}),n=e("<div/>",{class:"pin-galerie__content"});a.title=removeEmojis(a.title),a.title=a.title.split(" ",12).join().replace(/,/g," ")+"...";var r='<div class="pin-galerie__item-link-post"><a href="'+a.lien+'"><h2 class="pin-galerie__item-titre">'+a.title+"</h2></a></div>";if(n.append(r),a.img&&l.data_img){var d="";d=l.data_lightbox?'<div class="pin-galerie__item-image"><a href="'+a.imgLink+'" data-elementor-open-lightbox="no" data-fancybox="pin-gallery" data-caption="'+a.title.replace(/"/g,"'")+'"><img class="eac-image-loaded" src="'+a.img+'"></a></div>':'<div class="pin-galerie__item-image"><img class="eac-image-loaded" src="'+a.img+'"></div>',n.append(d)}a.description=removeEmojis(a.description),a.description=a.description.split(" ",l.data_longueur).join().replace(/,/g," ")+"[...]";var o='<div class="pin-galerie__item-description"><p>'+a.description+"</p></div>";if(n.append(o),l.data_date){var p='<div class="pin-galerie__item-date"><i class="fas fa-calendar" aria-hidden="true"></i>'+new Date(a.update).toLocaleDateString()+"</div>",c='<div class="pin-galerie__item-auteur"><i class="fas fa-user" aria-hidden="true"></i>'+a.author+"</div>";n.append(p),a.author&&n.append(c)}t.append(n),s.append(t)})),e.fn.fancybox&&e.fancybox.close(),e('[data-fancybox="pin-gallery"]',s).fancybox({afterLoad:function(e,i){var a=window.devicePixelRatio||1;i.width=i.width*(1.5*a),i.height=i.height*(1.5*a)}}),setTimeout((function(){e(".pin-galerie__item",s).css({transition:"all 500ms linear",transform:"scale(1)"})}),200)}})))}};e(window).on("elementor/frontend/init",a.init)}(jQuery,window.elementorFrontend);